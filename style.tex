\definecolor{titlepagecolor}{cmyk}{1,.60,0,.40}   %Blau

\def\blankpage{%
      \clearpage%
      \thispagestyle{empty}%
      \null%
      \clearpage}


\newlength{\lmargin}
\setlength{\lmargin}{1in + \hoffset + \oddsidemargin}
\newdynamicframe[odd]{2cm}{2cm}{-\lmargin}{6cm}[frameD-1a]
\newdynamicframe[even]{2cm}{2cm}{\textwidth+\lmargin-1cm}{6cm}[frameD-1b]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Für Kopf- und Fußzeilen:
\pagestyle{fancy}
\fancyhead[L]{\nouppercase{\leftmark}}
\fancyhead[R]{Skript SMP}
\fancyfoot[C]{\thepage}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Eigene Environments
%Beweis:
\newenvironment{Beweis}[1][]
  {\begin{tcolorbox}[colback=gray!5!white,colframe=gray!70!black,opacityframe=0.5, opacitybacktitle=0.5,sharpish corners,boxrule=0pt,frame hidden,title=Beweis \,#1,breakable,break at=23cm,pad at break=1mm,]}
  {\hfill\ensuremath{\square} \end{tcolorbox}}

%Definition:
\newenvironment{Definition}[1][]
  {\begin{tcolorbox}[colback=red!7!white,colframe=red!70!black,sharpish corners,boxrule=0pt,frame hidden,title=Definition \,#1]}
  {\end{tcolorbox}}

%Theorem:
\newenvironment{Theorem}[1][]
  {\begin{tcolorbox}[colback=titlepagecolor!5!white,colframe=titlepagecolor,sharpish corners,boxrule=0pt,frame hidden,title=Theorem \,#1]}
  {\end{tcolorbox}}

%Beispiel
\newenvironment{Beispiel}
  {\par\noindent\normalfont\par\nopagebreak%
  \begin{mdframed}[
     linewidth=2pt,
     linecolor=green,
     bottomline=false,topline=false,rightline=false,
     innerrightmargin=0pt,innertopmargin=0pt,innerbottommargin=0pt,
     innerleftmargin=1em,% Distanz zwischen vertikaler Strich & Inhalt
     skipabove=.5\baselineskip
   ]\underline{Beispiel:}\\}
{\end{mdframed}}

%Bemerkung
\newenvironment{Bemerkung}
  {\par\noindent\normalfont\par\nopagebreak%
  \begin{mdframed}[
     linewidth=2pt,
     linecolor=yellow,
     bottomline=false,topline=false,rightline=false,
     innerrightmargin=0pt,innertopmargin=0pt,innerbottommargin=0pt,
     innerleftmargin=1em,% Distanz zwischen vertikaler Strich & Inhalt
     skipabove=.5\baselineskip
   ]\underline{Bemerkung:}\\}
{\end{mdframed}}

%GTR-Tipp
\newenvironment{GTR-Tipp}
  {\par\noindent\normalfont\par\nopagebreak%
  \begin{mdframed}[
     linewidth=2pt,
     linecolor=gray,
     bottomline=false,topline=false,rightline=false,
     innerrightmargin=0pt,innertopmargin=0pt,innerbottommargin=0pt,
     innerleftmargin=1em,% Distanz zwischen vertikaler Strich & Inhalt
     skipabove=.5\baselineskip
   ]\underline{GTR-Tipp:}\\}
{\end{mdframed}}

%Codebox, aufrufbar mit \begin{lstlisting}[Name_der_Sprache]
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}
\lstset{
  backgroundcolor = \color{lightgray},
  frame=tb,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  numbers=false,
  numberstyle=\tiny\color{gray},
  keywordstyle=\color{blue},
  commentstyle=\color{dkgreen},
  stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=3
}

%Zahlenmengen-darstellung:
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\P}{\mathbb{P}}
\newcommand{\A}{\mathbb{A}}
% "zu zeigen"-Zeichen mit \zz Quelle: http://www.matheboard.de/archive/155832/thread.html
\newcommand{\zz}{\mathrm{Z\kern-.3em\raise-0.5ex\hbox{Z}}}
% Achtung Zeichen mit \danger
\newcommand\danger[1]{
  \renewcommand\stacktype{L}
  \scaleto{\stackon[1.3pt]{\color{red}$\triangle$}{\tiny !}}{#1}
}
%Logarithmus dualis als "operator" angesehen mit \ld
\DeclareMathOperator{\ld}{ld}
%(Linke Seite)"Per definitionem äquivalent zu" (Ist halt die Frage, ob ich das richtig nutze)
\newcommand{\logEqL}{\ratio\Leftrightarrow}
%(Rechte Seite)"Per definitionem äquivalent zu"
\newcommand{\logEqR}{\Leftrightarrow\ratio}
%Linke Seite wird definiert zu / durch rechte Seite
\newcommand{\definedBy}{\ratio=}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Kapitel-Titelblatt
\makeatletter
\def\thickhrulefill{\leavevmode \leaders \hrule height 1.2ex \hfill \kern \z@}
\def\@makechapterhead#1{
  \vspace*{9\p@}%
  {\parindent \z@ \centering \reset@font
        \thickhrulefill\quad
        \huge\scshape\bfseries\textit{\@chapapp{}  \thechapter}\normalsize
        \quad \thickhrulefill
        \par\nobreak
        \vspace*{10\p@}%
        \interlinepenalty\@M
        \hrule
        \vspace*{10\p@}%
        \Huge \bfseries #1 \par\nobreak
        \par
        \vspace*{10\p@}%
        \hrule
  }
  %%HIER NAME DES AUTORS (KP WIE THO)
  \vskip 50\p@}

\setlength{\mathindent}{0pt}
\makeatother
\makeatletter
\newcommand{\chapterauthor}[1]{%
  {\parindent0pt\vspace*{-45pt}%
  \begin{flushright}
    \linespread{1.1} by \scshape#1%
  \end{flushright}
  \par\nobreak\vspace*{35pt}}
  \@afterheading%
}
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Für den Titel:
\renewcommand\epigraphflush{flushright}
\renewcommand\epigraphsize{\normalsize}
\setlength\epigraphwidth{0.7\textwidth}
\DeclareFixedFont{\titlefont}{T1}{ppl}{b}{it}{0.5in}
\makeatletter
\def\printauthor{%
    {\large \@author}}
\makeatother
\author{%
    Clara Schaefer \\
    Bruno Gelfort \\
    Pascal Borel \\
    Rémy Moll \\
    [0,5cm]
    \textbf{1$^{ere}$ \& Te SMP}
    }
% The following code is borrowed from: https://tex.stackexchange.com/a/86310/10898
\newcommand\titlepagedecoration{%
\begin{tikzpicture}[remember picture,overlay,shorten >= -10pt]
\coordinate (aux1) at ([yshift=-15pt]current page.north east);
\coordinate (aux2) at ([yshift=-410pt]current page.north east);
\coordinate (aux3) at ([xshift=-4.5cm]current page.north east);
\coordinate (aux4) at ([yshift=-150pt]current page.north east);
\begin{scope}[titlepagecolor!40,line width=12pt,rounded corners=12pt]
\draw
  (aux1) -- coordinate (a)
  ++(225:5) --
  ++(-45:5.1) coordinate (b);
\draw[shorten <= -10pt]
  (aux3) --
  (a) --
  (aux1);
\draw[opacity=0.6,titlepagecolor,shorten <= -10pt]
  (b) --
  ++(225:2.2) --
  ++(-45:2.2);
\end{scope}
\draw[titlepagecolor,line width=8pt,rounded corners=8pt,shorten <= -10pt]
  (aux4) --
  ++(225:0.8) --
  ++(-45:0.8);
\begin{scope}[titlepagecolor!70,line width=6pt,rounded corners=8pt]
\draw[shorten <= -10pt]
  (aux2) --
  ++(225:3) coordinate[pos=0.45] (c) --
  ++(-45:3.1);
\draw
  (aux2) --
  (c) --
  ++(135:2.5) --
  ++(45:2.5) --
  ++(-45:2.5) coordinate[pos=0.3] (d);
\draw
  (d) -- +(45:1);
\end{scope}
\end{tikzpicture}%
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Fürs Inhaltsverzeichnis:
%\contentsmargin{0cm}
\titlecontents{chapter}[0pc]
{\addvspace{40pt}
\begin{tikzpicture}[remember picture, overlay]%
\draw[fill=titlepagecolor,draw=titlepagecolor, rounded corners] (-4,-.1) rectangle (.5,.5);
\pgftext[left,x=-1.9cm,y=0.2cm]{\color{white}\Large \chaptertitlename\ \thecontentslabel};
\end{tikzpicture}\hspace{1cm}\color{titlepagecolor}\large\bfseries}
{}
{}
{\hspace*{20pt}\hrulefill\hspace*{20pt}\large\bfseries \thecontentspage}%\hspace*{20pt}\rule{1cm}{0.3pt}}%
[\addvspace{5pt}]








\makeatletter
\renewcommand{\tableofcontents}{
    \chapter*{}
    \@starttoc{toc}
    }
\makeatother
